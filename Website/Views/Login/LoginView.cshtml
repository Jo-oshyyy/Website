<!-- This is LoginView.cshtml -->

@{
    ViewBag.Title = "Login";
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title</title>
    <link href="~/Content/LoginStyles.css" rel="stylesheet" />
</head>

<body>
    <!-- App Branding -->
    <div class="app-branding">
        <a href="@Url.Action("Index", "Dashboard")" class="app-name">LiteRise</a>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <svg class="sun-icon" fill="currentColor" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2"></line>
            <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2"></line>
            <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"></line>
            <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2"></line>
        </svg>
        <svg class="moon-icon" fill="currentColor" viewBox="0 0 24 24">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
    </button>

    <!-- Background Bubbles -->
    <div class="login-background">
        <div class="bubble bubble-1"></div>
        <div class="bubble bubble-2"></div>
        <div class="bubble bubble-3"></div>
        <div class="bubble bubble-4"></div>
    </div>

    <div class="login-container">
        <div class="login-card">
            <div class="login-header">
                <h1>Welcome Back!</h1>
                <p>Sign in to continue to your dashboard</p>
            </div>

            @if (ViewBag.ErrorMessage != null)
            {
                <div class="error-message">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM11 15H9V13H11V15ZM11 11H9V5H11V11Z" fill="currentColor" />
                    </svg>
                    <span>@ViewBag.ErrorMessage</span>
                </div>
            }

            <form method="post" class="login-form" id="loginForm">
                @Html.AntiForgeryToken()

                <div class="form-group">
                    <label for="username">Username</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 10C12.7614 10 15 7.76142 15 5C15 2.23858 12.7614 0 10 0C7.23858 0 5 2.23858 5 5C5 7.76142 7.23858 10 10 10Z" fill="currentColor" />
                            <path d="M10 12C4.47715 12 0 14.4772 0 17.5V20H20V17.5C20 14.4772 15.5228 12 10 12Z" fill="currentColor" />
                        </svg>
                        <input type="text" id="username" name="username" placeholder="Enter your username" required />
                    </div>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="input-wrapper">
                        <svg class="input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M15 7H14V5C14 2.24 11.76 0 9 0C6.24 0 4 2.24 4 5V7H3C1.9 7 1 7.9 1 9V19C1 20.1 1.9 21 3 21H15C16.1 21 17 20.1 17 19V9C17 7.9 16.1 7 15 7ZM9 16C7.9 16 7 15.1 7 14C7 12.9 7.9 12 9 12C10.1 12 11 12.9 11 14C11 15.1 10.1 16 9 16ZM12 7H6V5C6 3.34 7.34 2 9 2C10.66 2 12 3.34 12 5V7Z" fill="currentColor" />
                        </svg>
                        <input type="password" id="password" name="password" placeholder="Enter your password" required />
                        <button type="button" class="password-toggle" id="togglePassword" aria-label="Toggle password visibility">
                            <svg class="eye-open" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <svg class="eye-closed" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                <line x1="1" y1="1" x2="23" y2="23"></line>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="form-options">
                    <label class="remember-me">
                        <input type="checkbox" name="remember" />
                        <span>Remember me</span>
                    </label>
                    <a href="#" class="forgot-password" id="forgotPasswordLink">Forgot password?</a>
                </div>

                <button type="submit" class="btn-login">
                    Sign In
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M10 0L8.59 1.41L15.17 8H0V10H15.17L8.59 16.59L10 18L20 10L10 0Z" fill="currentColor" />
                    </svg>
                </button>
            </form>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose" aria-label="Close modal">&times;</button>

            <!-- Step 1: Email Input -->
            <div id="emailStep" class="modal-step active">
                <div class="modal-icon">
                    <svg width="80" height="80" viewBox="0 0 100 100" fill="none">
                        <circle cx="50" cy="50" r="45" fill="#E8F5E9" />
                        <path d="M50 30C38.95 30 30 38.95 30 50C30 61.05 38.95 70 50 70C61.05 70 70 61.05 70 50C70 38.95 61.05 30 50 30ZM54 55H46V47H54V55ZM54 43H46V35H54V43Z" fill="#4CAF50" />
                    </svg>
                </div>
                <h2>OTP Verification</h2>
                <p>We will send you one-time password to your email</p>

                <div class="modal-form-group">
                    <label for="emailInput">Enter Email</label>
                    <input type="email" id="emailInput" placeholder="example@email.com" required />
                </div>

                <button class="btn-modal" id="getOtpBtn">Get OTP</button>
            </div>

            <!-- Step 2: OTP Input -->
            <div id="otpStep" class="modal-step">
                <div class="modal-icon">
                    <svg width="80" height="80" viewBox="0 0 100 100" fill="none">
                        <circle cx="50" cy="50" r="45" fill="#E8F5E9" />
                        <path d="M70 45L45 70L30 55L33.5 51.5L45 63L66.5 41.5L70 45Z" fill="#4CAF50" />
                    </svg>
                </div>
                <h2>OTP Verification</h2>
                <p>Enter the OTP sent to <strong id="displayEmail"></strong></p>

                <div class="otp-input-group">
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
                    <input type="text" class="otp-input" maxlength="1" pattern="[0-9]" inputmode="numeric" />
                </div>

                <div class="resend-section">
                    <span>Didn't you receive the OTP? </span>
                    <a href="#" id="resendOtpLink">Resend OTP</a>
                </div>

                <button class="btn-modal" id="verifyOtpBtn">Verify</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    <script src="~/Scripts/login.js"></script>
</body>
</html>